
                          *= $0801
0801 4C 14 08 00 97
                          .BYTE $4C,$14,$08,$00,$97
               TURBOASS   = 780
0806 37 38 30             .TEXT "780"
0809 2C 30 3A 9E 32 30
                          .BYTE $2C,$30,$3A,$9E,$32,$30
080F 37 33 00 00 00
                          .BYTE $37,$33,$00,$00,$00
0814 A9 01                LDA #1
0816 8D 0C 03             STA TURBOASS
0819 4C 1B 0C             JMP MAIN


               PRINT
                          .BLOCK
081C 68                   PLA
081D 8D 27 08             STA PRINT0+1
0820 68                   PLA
0821 8D 28 08             STA PRINT0+2
0824 A2 01                LDX #1
               PRINT0
0826 BD 26 08             LDA !*,X
0829 F0 06                BEQ PRINT1
082B 20 D2 FF             JSR $FFD2
082E E8                   INX
082F D0 F5                BNE PRINT0
               PRINT1
0831 38                   SEC
0832 8A                   TXA
0833 6D 27 08             ADC PRINT0+1
0836 8D 42 08             STA PRINT2+1
0839 A9 00                LDA #0
083B 6D 28 08             ADC PRINT0+2
083E 8D 43 08             STA PRINT2+2
               PRINT2
0841 4C 41 08             JMP !*
                          .BEND


               PRINTHB
                          .BLOCK
0844 48                   PHA
0845 4A                   LSR A
0846 4A                   LSR A
0847 4A                   LSR A
0848 4A                   LSR A
0849 20 4F 08             JSR PRINTHN
084C 68                   PLA
084D 29 0F                AND #$0F
               PRINTHN
084F 09 30                ORA #$30
0851 C9 3A                CMP #$3A
0853 90 02                BCC PRINTHN0
0855 69 06                ADC #6
               PRINTHN0
0857 20 D2 FF             JSR $FFD2
085A 60                   RTS
                          .BEND

085B 00        STARTTIMER BRK
085C 00        STOPTIMER  BRK

085D 00        INTLOW     .BYTE 0
085E 00        INTHIGH    .BYTE 0
085F 00        FLAGSBEFORE .BYTE 0
0860 00        FLAGSAFTER .BYTE 0

               SETINT
                          .BLOCK
0861 48                   PHA
0862 A9 00                LDA #0
0864 8D 0E DD             STA $DD0E
0867 AD 0D DD             LDA $DD0D
086A A9 7F                LDA #127
086C 8D 0D DC             STA $DC0D
086F A9 81                LDA #129
0871 8D 0D DD             STA $DD0D
0874 18                   CLC
0875 68                   PLA
0876 69 03                ADC #3
0878 8D 04 DD             STA $DD04
087B A9 00                LDA #0
087D 8D 05 DD             STA $DD05
0880 A9 A0                LDA #<NMI
0882 8D FA FF             STA $FFFA
0885 A9 08                LDA #>NMI
0887 8D FB FF             STA $FFFB
088A A9 35                LDA #$35
088C 85 01                STA 1
088E AD 11 D0             LDA $D011
0891 30 07                BMI OK
               WAIT
0893 AD 12 D0             LDA $D012
0896 C9 1E                CMP #30
0898 B0 F9                BCS WAIT
               OK
089A A9 19                LDA #$19
089C 8D 0E DD             STA $DD0E
089F 60                   RTS
                          .BEND
               NMI
                          .BLOCK
08A0 08                   PHP
08A1 2C 0D DD             BIT $DD0D
08A4 8D C7 08             STA SAVEDA+1
08A7 8E C5 08             STX SAVEDX+1
08AA 68                   PLA
08AB 8D 60 08             STA FLAGSAFTER
08AE BA                   TSX
08AF E8                   INX
08B0 BD 00 01             LDA $0100,X
08B3 8D 5F 08             STA FLAGSBEFORE
08B6 E8                   INX
08B7 BD 00 01             LDA $0100,X
08BA 8D 5D 08             STA INTLOW
08BD E8                   INX
08BE BD 00 01             LDA $0100,X
08C1 8D 5E 08             STA INTHIGH
               SAVEDX
08C4 A2 11                LDX #$11
               SAVEDA
08C6 A9 11                LDA #$11
08C8 40                   RTI
                          .BEND


               RESTOREINT
08C9 A9 37                LDA #$37
08CB 85 01                STA 1
08CD A9 81                LDA #129
08CF 8D 0D DC             STA $DC0D
08D2 60                   RTS


08D3 00        GSAVESP    .BYTE 0
               GASTACK    *= *+256

               SAVESTACK
                          .BLOCK
09D4 BA                   TSX
09D5 8E D3 08             STX GSAVESP
09D8 A2 00                LDX #0
               SAVE
09DA BD 00 01             LDA $0100,X
09DD 9D D4 08             STA GASTACK,X
09E0 E8                   INX
09E1 D0 F7                BNE SAVE
09E3 60                   RTS
                          .BEND

               RESTORESTACK
                          .BLOCK
09E4 68                   PLA
09E5 8D 01 0A             STA RETURN2+1
09E8 68                   PLA
09E9 8D FE 09             STA RETURN1+1
09EC AE D3 08             LDX GSAVESP
09EF E8                   INX
09F0 E8                   INX
09F1 9A                   TXS
09F2 A2 00                LDX #0
               RESTORE
09F4 BD D4 08             LDA GASTACK,X
09F7 9D 00 01             STA $0100,X
09FA E8                   INX
09FB D0 F7                BNE RESTORE
               RETURN1
09FD A9 11                LDA #$11
09FF 48                   PHA
               RETURN2
0A00 A9 11                LDA #$11
0A02 48                   PHA
0A03 60                   RTS
                          .BEND

               ADDRESSING
0A04 75 13                .WORD BRKN
0A06 3B 10                .WORD RIX
0A08 07 15                .WORD HLTN
0A0A 7B 10                .WORD MIX
0A0C 37 0E                .WORD RZ
0A0E 37 0E                .WORD RZ
0A10 64 0E                .WORD MZ
0A12 64 0E                .WORD MZ
0A14 C1 13                .WORD PHPN
0A16 0B 0E                .WORD B
0A18 9D 0D                .WORD N
0A1A 0B 0E                .WORD B
0A1C F9 0E                .WORD RA
0A1E F9 0E                .WORD RA
0A20 28 0F                .WORD MA
0A22 28 0F                .WORD MA
0A24 AC 11                .WORD R
0A26 BD 10                .WORD RIY
0A28 07 15                .WORD HLTN
0A2A 6A 11                .WORD MIY
0A2C 93 0E                .WORD RZX
0A2E 93 0E                .WORD RZX
0A30 C5 0E                .WORD MZX
0A32 C5 0E                .WORD MZX
0A34 9D 0D                .WORD N
0A36 59 0F                .WORD RAY
0A38 9D 0D                .WORD N
0A3A FF 0F                .WORD MAY
0A3C 59 0F                .WORD RAX
0A3E 59 0F                .WORD RAX
0A40 FF 0F                .WORD MAX
0A42 FF 0F                .WORD MAX
0A44 7B 14                .WORD JSRW
0A46 3B 10                .WORD RIX
0A48 07 15                .WORD HLTN
0A4A 7B 10                .WORD MIX
0A4C 37 0E                .WORD RZ
0A4E 37 0E                .WORD RZ
0A50 64 0E                .WORD MZ
0A52 64 0E                .WORD MZ
0A54 ED 13                .WORD PLPN
0A56 0B 0E                .WORD B
0A58 9D 0D                .WORD N
0A5A 0B 0E                .WORD B
0A5C F9 0E                .WORD RA
0A5E F9 0E                .WORD RA
0A60 28 0F                .WORD MA
0A62 28 0F                .WORD MA
0A64 AC 11                .WORD R
0A66 BD 10                .WORD RIY
0A68 07 15                .WORD HLTN
0A6A 6A 11                .WORD MIY
0A6C 93 0E                .WORD RZX
0A6E 93 0E                .WORD RZX
0A70 C5 0E                .WORD MZX
0A72 C5 0E                .WORD MZX
0A74 9D 0D                .WORD N
0A76 59 0F                .WORD RAY
0A78 9D 0D                .WORD N
0A7A FF 0F                .WORD MAY
0A7C 59 0F                .WORD RAX
0A7E 59 0F                .WORD RAX
0A80 FF 0F                .WORD MAX
0A82 FF 0F                .WORD MAX
0A84 D7 14                .WORD RTIN
0A86 3B 10                .WORD RIX
0A88 07 15                .WORD HLTN
0A8A 7B 10                .WORD MIX
0A8C 37 0E                .WORD RZ
0A8E 37 0E                .WORD RZ
0A90 64 0E                .WORD MZ
0A92 64 0E                .WORD MZ
0A94 C1 13                .WORD PHAN
0A96 0B 0E                .WORD B
0A98 9D 0D                .WORD N
0A9A 0B 0E                .WORD B
0A9C 1D 14                .WORD JMPW
0A9E F9 0E                .WORD RA
0AA0 28 0F                .WORD MA
0AA2 28 0F                .WORD MA
0AA4 AC 11                .WORD R
0AA6 BD 10                .WORD RIY
0AA8 07 15                .WORD HLTN
0AAA 6A 11                .WORD MIY
0AAC 93 0E                .WORD RZX
0AAE 93 0E                .WORD RZX
0AB0 C5 0E                .WORD MZX
0AB2 C5 0E                .WORD MZX
0AB4 9D 0D                .WORD N
0AB6 59 0F                .WORD RAY
0AB8 9D 0D                .WORD N
0ABA FF 0F                .WORD MAY
0ABC 59 0F                .WORD RAX
0ABE 59 0F                .WORD RAX
0AC0 FF 0F                .WORD MAX
0AC2 FF 0F                .WORD MAX
0AC4 A8 14                .WORD RTSN
0AC6 3B 10                .WORD RIX
0AC8 07 15                .WORD HLTN
0ACA 7B 10                .WORD MIX
0ACC 37 0E                .WORD RZ
0ACE 37 0E                .WORD RZ
0AD0 64 0E                .WORD MZ
0AD2 64 0E                .WORD MZ
0AD4 ED 13                .WORD PLAN
0AD6 0B 0E                .WORD B
0AD8 9D 0D                .WORD N
0ADA 0B 0E                .WORD B
0ADC 46 14                .WORD JMPI
0ADE F9 0E                .WORD RA
0AE0 28 0F                .WORD MA
0AE2 28 0F                .WORD MA
0AE4 AC 11                .WORD R
0AE6 BD 10                .WORD RIY
0AE8 07 15                .WORD HLTN
0AEA 6A 11                .WORD MIY
0AEC 93 0E                .WORD RZX
0AEE 93 0E                .WORD RZX
0AF0 C5 0E                .WORD MZX
0AF2 C5 0E                .WORD MZX
0AF4 CF 0D                .WORD SEIN
0AF6 59 0F                .WORD RAY
0AF8 9D 0D                .WORD N
0AFA FF 0F                .WORD MAY
0AFC 59 0F                .WORD RAX
0AFE 59 0F                .WORD RAX
0B00 FF 0F                .WORD MAX
0B02 FF 0F                .WORD MAX
0B04 0B 0E                .WORD B
0B06 3B 10                .WORD WIX
0B08 0B 0E                .WORD B
0B0A 3B 10                .WORD RIX
0B0C 37 0E                .WORD WZ
0B0E 37 0E                .WORD WZ
0B10 37 0E                .WORD WZ
0B12 37 0E                .WORD RZ
0B14 9D 0D                .WORD N
0B16 0B 0E                .WORD B
0B18 9D 0D                .WORD N
0B1A 0B 0E                .WORD B
0B1C F9 0E                .WORD WA
0B1E F9 0E                .WORD WA
0B20 F9 0E                .WORD WA
0B22 F9 0E                .WORD RA
0B24 AC 11                .WORD R
0B26 2A 11                .WORD WIY
0B28 07 15                .WORD HLTN
0B2A 2A 11                .WORD WIY
0B2C 93 0E                .WORD WZX
0B2E 93 0E                .WORD WZX
0B30 93 0E                .WORD WZY
0B32 93 0E                .WORD RZY
0B34 9D 0D                .WORD N
0B36 C5 0F                .WORD WAY
0B38 9D 0D                .WORD N
0B3A C5 0F                .WORD WAY
0B3C C5 0F                .WORD WAX
0B3E C5 0F                .WORD WAX
0B40 C5 0F                .WORD WAY
0B42 C5 0F                .WORD WAY
0B44 0B 0E                .WORD B
0B46 3B 10                .WORD RIX
0B48 0B 0E                .WORD B
0B4A 3B 10                .WORD RIX
0B4C 37 0E                .WORD RZ
0B4E 37 0E                .WORD RZ
0B50 37 0E                .WORD RZ
0B52 37 0E                .WORD RZ
0B54 9D 0D                .WORD N
0B56 0B 0E                .WORD B
0B58 9D 0D                .WORD N
0B5A 0B 0E                .WORD B
0B5C F9 0E                .WORD RA
0B5E F9 0E                .WORD RA
0B60 F9 0E                .WORD RA
0B62 F9 0E                .WORD RA
0B64 AC 11                .WORD R
0B66 BD 10                .WORD RIY
0B68 07 15                .WORD HLTN
0B6A BD 10                .WORD RIY
0B6C 93 0E                .WORD RZX
0B6E 93 0E                .WORD RZX
0B70 93 0E                .WORD RZY
0B72 93 0E                .WORD RZY
0B74 9D 0D                .WORD N
0B76 59 0F                .WORD RAY
0B78 9D 0D                .WORD N
0B7A 59 0F                .WORD RAY
0B7C 59 0F                .WORD RAX
0B7E 59 0F                .WORD RAX
0B80 59 0F                .WORD RAY
0B82 59 0F                .WORD RAY
0B84 0B 0E                .WORD B
0B86 3B 10                .WORD RIX
0B88 0B 0E                .WORD B
0B8A 7B 10                .WORD MIX
0B8C 37 0E                .WORD RZ
0B8E 37 0E                .WORD RZ
0B90 64 0E                .WORD MZ
0B92 64 0E                .WORD MZ
0B94 9D 0D                .WORD N
0B96 0B 0E                .WORD B
0B98 9D 0D                .WORD N
0B9A 0B 0E                .WORD B
0B9C F9 0E                .WORD RA
0B9E F9 0E                .WORD RA
0BA0 28 0F                .WORD MA
0BA2 28 0F                .WORD MA
0BA4 AC 11                .WORD R
0BA6 BD 10                .WORD RIY
0BA8 07 15                .WORD HLTN
0BAA 6A 11                .WORD MIY
0BAC 93 0E                .WORD RZX
0BAE 93 0E                .WORD RZX
0BB0 C5 0E                .WORD MZX
0BB2 C5 0E                .WORD MZX
0BB4 9D 0D                .WORD N
0BB6 59 0F                .WORD RAY
0BB8 9D 0D                .WORD N
0BBA FF 0F                .WORD MAY
0BBC 59 0F                .WORD RAX
0BBE 59 0F                .WORD RAX
0BC0 FF 0F                .WORD MAX
0BC2 FF 0F                .WORD MAX
0BC4 0B 0E                .WORD B
0BC6 3B 10                .WORD RIX
0BC8 0B 0E                .WORD B
0BCA 7B 10                .WORD MIX
0BCC 37 0E                .WORD RZ
0BCE 37 0E                .WORD RZ
0BD0 64 0E                .WORD MZ
0BD2 64 0E                .WORD MZ
0BD4 9D 0D                .WORD N
0BD6 0B 0E                .WORD B
0BD8 9D 0D                .WORD N
0BDA 0B 0E                .WORD B
0BDC F9 0E                .WORD RA
0BDE F9 0E                .WORD RA
0BE0 28 0F                .WORD MA
0BE2 28 0F                .WORD MA
0BE4 AC 11                .WORD R
0BE6 BD 10                .WORD RIY
0BE8 07 15                .WORD HLTN
0BEA 6A 11                .WORD MIY
0BEC 93 0E                .WORD RZX
0BEE 93 0E                .WORD RZX
0BF0 C5 0E                .WORD MZX
0BF2 C5 0E                .WORD MZX
0BF4 9D 0D                .WORD N
0BF6 59 0F                .WORD RAY
0BF8 9D 0D                .WORD N
0BFA FF 0F                .WORD MAY
0BFC 59 0F                .WORD RAX
0BFE 59 0F                .WORD RAX
0C00 FF 0F                .WORD MAX
0C02 FF 0F                .WORD MAX

0C04 00        CMD        .BYTE 0

               WRONG
0C05 20 C9 08             JSR RESTOREINT
0C08 20 1C 08             JSR PRINT
0C0B 0D                   .BYTE 13
0C0C 57 52 4F 4E 47 20 24 44 44 30 44
                          .TEXT "WRONG $DD0D"
0C17 00                   .BYTE 0
0C18 4C 47 0D             JMP WAITK

               MAIN
0C1B 20 1C 08             JSR PRINT
0C1E 0D                   .BYTE 13
0C1F 91 4E 4D 49
                          .TEXT "‘NMI"
0C23 00                   .BYTE 0

0C24 BA                   TSX
0C25 8E CF 0C             STX ERROR+1
0C28 A9 00                LDA #0
0C2A 8D 04 0C             STA CMD

0C2D A9 05                LDA #5
0C2F 20 61 08             JSR SETINT
0C32 AD 0D DD             LDA $DD0D
0C35 C9 00                CMP #$00
0C37 D0 CC                BNE WRONG
0C39 A9 04                LDA #4
0C3B 20 61 08             JSR SETINT
0C3E AD 0D DD             LDA $DD0D
0C41 C9 01                CMP #$01
0C43 D0 C0                BNE WRONG
0C45 A9 03                LDA #3
0C47 20 61 08             JSR SETINT
0C4A AD 0D DD             LDA $DD0D
0C4D C9 81                CMP #$81
0C4F D0 B4                BNE WRONG
0C51 20 C9 08             JSR RESTOREINT

               LOOP
                          .BLOCK
0C54 AD 04 0C             LDA CMD
0C57 C9 FF                CMP #$FF
0C59 4C 73 0C             JMP OK
0C5C A9 0D                LDA #13
0C5E 20 D2 FF             JSR $FFD2
0C61 AD 04 0C             LDA CMD
0C64 20 44 08             JSR PRINTHB
               WAITKEY
0C67 20 E4 FF             JSR $FFE4
0C6A F0 FB                BEQ WAITKEY
0C6C C9 03                CMP #3
0C6E D0 03                BNE OK
0C70 4C 00 80             JMP $8000
               OK
                          .BEND

0C73 A9 04                LDA #<ADDRESSING
0C75 A2 0A                LDX #>ADDRESSING
0C77 18                   CLC
0C78 6D 04 0C             ADC CMD
0C7B 90 01                BCC NOINC1
0C7D E8                   INX
               NOINC1
0C7E 18                   CLC
0C7F 6D 04 0C             ADC CMD
0C82 90 01                BCC NOINC2
0C84 E8                   INX
               NOINC2
0C85 85 AC                STA 172
0C87 86 AD                STX 173
0C89 A0 00                LDY #0
0C8B B1 AC                LDA (172),Y
0C8D 8D 97 0C             STA JUMP+1
0C90 C8                   INY
0C91 B1 AC                LDA (172),Y
0C93 8D 98 0C             STA JUMP+2
               JUMP
0C96 20 11 11             JSR $1111
               NOERROR
0C99 EE 04 0C             INC CMD
0C9C D0 B6                BNE LOOP

0C9E 4C 5E 0D             JMP OK

0CA1 00        CLOCK      .BYTE 0
0CA2 00        RIGHTLOW   .BYTE 0
0CA3 00        RIGHTHIGH  .BYTE 0

               COMPARE
0CA4 8E A9 0C             STX ADDLOW+1
0CA7 18                   CLC
               ADDLOW
0CA8 69 11                ADC #$11
0CAA 8D A2 0C             STA RIGHTLOW
0CAD 90 01                BCC NOINY
0CAF C8                   INY
               NOINY
0CB0 8C A3 0C             STY RIGHTHIGH
0CB3 CD 5D 08             CMP INTLOW
0CB6 D0 16                BNE ERROR
0CB8 CC 5E 08             CPY INTHIGH
0CBB D0 11                BNE ERROR
0CBD AD 5F 08             LDA FLAGSBEFORE
0CC0 29 14                AND #$14
0CC2 D0 0A                BNE ERROR
0CC4 AD 60 08             LDA FLAGSAFTER
0CC7 29 14                AND #$14
0CC9 C9 14                CMP #$14
0CCB D0 01                BNE ERROR
0CCD 60                   RTS

               ERROR
0CCE A2 11                LDX #$11
0CD0 9A                   TXS
0CD1 A9 0D                LDA #13
0CD3 20 D2 FF             JSR $FFD2
0CD6 AD 04 0C             LDA CMD
0CD9 20 44 08             JSR PRINTHB
0CDC A9 2F                LDA #"/"
0CDE 20 D2 FF             JSR $FFD2
0CE1 AE A1 0C             LDX CLOCK
0CE4 A9 00                LDA #0
0CE6 20 CD BD             JSR $BDCD
0CE9 20 1C 08             JSR PRINT
0CEC 0D                   .BYTE 13
0CED 53 54 41 43 4B 20 20
                          .TEXT "STACK  "
0CF4 00                   .BYTE 0
0CF5 AD 5E 08             LDA INTHIGH
0CF8 20 44 08             JSR PRINTHB
0CFB AD 5D 08             LDA INTLOW
0CFE 20 44 08             JSR PRINTHB
0D01 A9 20                LDA #32
0D03 20 D2 FF             JSR $FFD2
0D06 AD 5F 08             LDA FLAGSBEFORE
0D09 29 14                AND #$14
0D0B 20 44 08             JSR PRINTHB
0D0E A9 20                LDA #32
0D10 20 D2 FF             JSR $FFD2
0D13 AD 60 08             LDA FLAGSAFTER
0D16 29 14                AND #$14
0D18 20 44 08             JSR PRINTHB
0D1B 20 1C 08             JSR PRINT
0D1E 0D                   .BYTE 13
0D1F 52 49 47 48 54 20 20
                          .TEXT "RIGHT  "
0D26 00                   .BYTE 0
0D27 AD A3 0C             LDA RIGHTHIGH
0D2A 20 44 08             JSR PRINTHB
0D2D AD A2 0C             LDA RIGHTLOW
0D30 20 44 08             JSR PRINTHB
0D33 A9 20                LDA #32
0D35 20 D2 FF             JSR $FFD2
0D38 A9 00                LDA #$00
0D3A 20 44 08             JSR PRINTHB
0D3D A9 20                LDA #32
0D3F 20 D2 FF             JSR $FFD2
0D42 A9 14                LDA #$14
0D44 20 44 08             JSR PRINTHB
               WAITK
0D47 20 E4 FF             JSR $FFE4
0D4A F0 FB                BEQ WAITK
0D4C C9 03                CMP #3
0D4E F0 03                BEQ STOP
0D50 4C 99 0C             JMP NOERROR
               STOP
0D53 AD 0C 03             LDA TURBOASS
0D56 F0 03                BEQ BASIC
0D58 4C 00 80             JMP $8000
               BASIC
0D5B 4C 74 A4             JMP $A474


               OK
0D5E 20 1C 08             JSR PRINT
0D61 20 2D 20 4F 4B
                          .TEXT " - OK"
0D66 0D 00                .BYTE 13,0
0D68 AD 0C 03             LDA TURBOASS
0D6B F0 08                BEQ LOAD
0D6D 20 E4 FF  WAITKEY    JSR $FFE4
0D70 F0 FB                BEQ WAITKEY
0D72 4C 00 80             JMP $8000

               LOAD
0D75 A9 2F                LDA #47
0D77 85 00                STA 0
0D79 20 1C 08             JSR PRINT
0D7C 43 49 41 31 54 42 31 32 33
               NAME       .TEXT "CIA1TB123"
               NAMELEN    = *-NAME
0D85 00                   .BYTE 0
0D86 A9 00                LDA #0
0D88 85 0A                STA $0A
0D8A 85 B9                STA $B9
0D8C A9 09                LDA #NAMELEN
0D8E 85 B7                STA $B7
0D90 A9 7C                LDA #<NAME
0D92 85 BB                STA $BB
0D94 A9 0D                LDA #>NAME
0D96 85 BC                STA $BC
0D98 68                   PLA
0D99 68                   PLA
0D9A 4C 6F E1             JMP $E16F


               N
                          .BLOCK
0D9D 20 D4 09             JSR SAVESTACK
0DA0 AD 04 0C             LDA CMD
0DA3 8D B1 0D             STA COMMAND
0DA6 A9 01                LDA #1
0DA8 8D A1 0C             STA CLOCK
               LOOP
0DAB AD A1 0C             LDA CLOCK
0DAE 20 61 08             JSR SETINT
               COMMAND
0DB1 EA                   NOP
0DB2 58                   CLI
0DB3 D8                   CLD
0DB4 20 C9 08             JSR RESTOREINT
0DB7 AE A1 0C             LDX CLOCK
0DBA BD CD 0D             LDA RIGHT,X
0DBD A2 B1                LDX #<COMMAND
0DBF A0 0D                LDY #>COMMAND
0DC1 20 A4 0C             JSR COMPARE
0DC4 CE A1 0C             DEC CLOCK
0DC7 10 E2                BPL LOOP
0DC9 20 E4 09             JSR RESTORESTACK
0DCC 60                   RTS
0DCD 01 02     RIGHT      .BYTE 1,2
                          .BEND


               SEIN
                          .BLOCK
0DCF 20 D4 09             JSR SAVESTACK
0DD2 AD 04 0C             LDA CMD
0DD5 8D E3 0D             STA COMMAND
0DD8 A9 01                LDA #1
0DDA 8D A1 0C             STA CLOCK
               LOOP
0DDD AD A1 0C             LDA CLOCK
0DE0 20 61 08             JSR SETINT
               COMMAND
0DE3 EA                   NOP
0DE4 58                   CLI
0DE5 D8                   CLD
0DE6 20 C9 08             JSR RESTOREINT
0DE9 AE A1 0C             LDX CLOCK
0DEC D0 08                BNE NOT0
0DEE AD 5F 08             LDA FLAGSBEFORE
0DF1 49 04                EOR #$04
0DF3 8D 5F 08             STA FLAGSBEFORE
               NOT0
0DF6 BD 09 0E             LDA RIGHT,X
0DF9 A2 E3                LDX #<COMMAND
0DFB A0 0D                LDY #>COMMAND
0DFD 20 A4 0C             JSR COMPARE
0E00 CE A1 0C             DEC CLOCK
0E03 10 D8                BPL LOOP
0E05 20 E4 09             JSR RESTORESTACK
0E08 60                   RTS
0E09 01 02     RIGHT      .BYTE 1,2
                          .BEND


               B
                          .BLOCK
0E0B AD 04 0C             LDA CMD
0E0E 8D 1C 0E             STA COMMAND
0E11 A9 01                LDA #1
0E13 8D A1 0C             STA CLOCK
               LOOP
0E16 AD A1 0C             LDA CLOCK
0E19 20 61 08             JSR SETINT
               COMMAND
0E1C A9 00                LDA #0
0E1E EA                   NOP
0E1F 20 C9 08             JSR RESTOREINT
0E22 AE A1 0C             LDX CLOCK
0E25 BD 35 0E             LDA RIGHT,X
0E28 A2 1C                LDX #<COMMAND
0E2A A0 0E                LDY #>COMMAND
0E2C 20 A4 0C             JSR COMPARE
0E2F CE A1 0C             DEC CLOCK
0E32 10 E2                BPL LOOP
0E34 60                   RTS
0E35 02 03     RIGHT      .BYTE 2,3
                          .BEND


               RZ
               WZ
                          .BLOCK
0E37 AD 04 0C             LDA CMD
0E3A 8D 48 0E             STA COMMAND
0E3D A9 02                LDA #2
0E3F 8D A1 0C             STA CLOCK
               LOOP
0E42 AD A1 0C             LDA CLOCK
0E45 20 61 08             JSR SETINT
               COMMAND
0E48 A5 02                LDA 2
0E4A EA                   NOP
0E4B 20 C9 08             JSR RESTOREINT
0E4E AE A1 0C             LDX CLOCK
0E51 BD 61 0E             LDA RIGHT,X
0E54 A2 48                LDX #<COMMAND
0E56 A0 0E                LDY #>COMMAND
0E58 20 A4 0C             JSR COMPARE
0E5B CE A1 0C             DEC CLOCK
0E5E 10 E2                BPL LOOP
0E60 60                   RTS
0E61 02 02 03  RIGHT      .BYTE 2,2,3
                          .BEND


               MZ
                          .BLOCK
0E64 AD 04 0C             LDA CMD
0E67 8D 75 0E             STA COMMAND
0E6A A9 04                LDA #4
0E6C 8D A1 0C             STA CLOCK
               LOOP
0E6F AD A1 0C             LDA CLOCK
0E72 20 61 08             JSR SETINT
               COMMAND
0E75 A5 02                LDA 2
0E77 EA                   NOP
0E78 20 C9 08             JSR RESTOREINT
0E7B AE A1 0C             LDX CLOCK
0E7E BD 8E 0E             LDA RIGHT,X
0E81 A2 75                LDX #<COMMAND
0E83 A0 0E                LDY #>COMMAND
0E85 20 A4 0C             JSR COMPARE
0E88 CE A1 0C             DEC CLOCK
0E8B 10 E2                BPL LOOP
0E8D 60                   RTS
0E8E 02 02 02 02 03
               RIGHT      .BYTE 2,2,2,2,3
                          .BEND


               RZX
               RZY
               WZX
               WZY
                          .BLOCK
0E93 AD 04 0C             LDA CMD
0E96 8D A8 0E             STA COMMAND
0E99 A9 03                LDA #3
0E9B 8D A1 0C             STA CLOCK
               LOOP
0E9E A2 00                LDX #0
0EA0 A0 00                LDY #0
0EA2 AD A1 0C             LDA CLOCK
0EA5 20 61 08             JSR SETINT
               COMMAND
0EA8 B5 02                LDA 2,X
0EAA EA                   NOP
0EAB 20 C9 08             JSR RESTOREINT
0EAE AE A1 0C             LDX CLOCK
0EB1 BD C1 0E             LDA RIGHT,X
0EB4 A2 A8                LDX #<COMMAND
0EB6 A0 0E                LDY #>COMMAND
0EB8 20 A4 0C             JSR COMPARE
0EBB CE A1 0C             DEC CLOCK
0EBE 10 DE                BPL LOOP
0EC0 60                   RTS
0EC1 02 02 02 03
               RIGHT      .BYTE 2,2,2,3
                          .BEND



               MZX
               MZY
                          .BLOCK
0EC5 AD 04 0C             LDA CMD
0EC8 8D DA 0E             STA COMMAND
0ECB A9 05                LDA #5
0ECD 8D A1 0C             STA CLOCK
               LOOP
0ED0 A2 00                LDX #0
0ED2 A0 00                LDY #0
0ED4 AD A1 0C             LDA CLOCK
0ED7 20 61 08             JSR SETINT
               COMMAND
0EDA B5 02                LDA 2,X
0EDC EA                   NOP
0EDD 20 C9 08             JSR RESTOREINT
0EE0 AE A1 0C             LDX CLOCK
0EE3 BD F3 0E             LDA RIGHT,X
0EE6 A2 DA                LDX #<COMMAND
0EE8 A0 0E                LDY #>COMMAND
0EEA 20 A4 0C             JSR COMPARE
0EED CE A1 0C             DEC CLOCK
0EF0 10 DE                BPL LOOP
0EF2 60                   RTS
0EF3 02 02 02 02 02 03
               RIGHT      .BYTE 2,2,2,2,2,3
                          .BEND


               RA
               WA
                          .BLOCK
0EF9 AD 04 0C             LDA CMD
0EFC 8D 0A 0F             STA COMMAND
0EFF A9 03                LDA #3
0F01 8D A1 0C             STA CLOCK
               LOOP
0F04 AD A1 0C             LDA CLOCK
0F07 20 61 08             JSR SETINT
               COMMAND
0F0A AD F0 FF             LDA $FFF0
0F0D EA                   NOP
0F0E 20 C9 08             JSR RESTOREINT
0F11 AE A1 0C             LDX CLOCK
0F14 BD 24 0F             LDA RIGHT,X
0F17 A2 0A                LDX #<COMMAND
0F19 A0 0F                LDY #>COMMAND
0F1B 20 A4 0C             JSR COMPARE
0F1E CE A1 0C             DEC CLOCK
0F21 10 E1                BPL LOOP
0F23 60                   RTS
0F24 03 03 03 04
               RIGHT      .BYTE 3,3,3,4
                          .BEND


               MA
                          .BLOCK
0F28 AD 04 0C             LDA CMD
0F2B 8D 39 0F             STA COMMAND
0F2E A9 05                LDA #5
0F30 8D A1 0C             STA CLOCK
               LOOP
0F33 AD A1 0C             LDA CLOCK
0F36 20 61 08             JSR SETINT
               COMMAND
0F39 AD F0 FF             LDA $FFF0
0F3C EA                   NOP
0F3D 20 C9 08             JSR RESTOREINT
0F40 AE A1 0C             LDX CLOCK
0F43 BD 53 0F             LDA RIGHT,X
0F46 A2 39                LDX #<COMMAND
0F48 A0 0F                LDY #>COMMAND
0F4A 20 A4 0C             JSR COMPARE
0F4D CE A1 0C             DEC CLOCK
0F50 10 E1                BPL LOOP
0F52 60                   RTS
0F53 03 03 03 03 03 04
               RIGHT      .BYTE 3,3,3,3,3,4
                          .BEND


               RAX
               RAY
                          .BLOCK
0F59 20 D4 09             JSR SAVESTACK
0F5C AD 04 0C             LDA CMD
0F5F 8D 71 0F             STA COMMAND
0F62 A9 03                LDA #3
0F64 8D A1 0C             STA CLOCK
               LOOP
0F67 A2 00                LDX #0
0F69 A0 00                LDY #0
0F6B AD A1 0C             LDA CLOCK
0F6E 20 61 08             JSR SETINT
               COMMAND
0F71 BD F0 FF             LDA $FFF0,X
0F74 EA                   NOP
0F75 20 C9 08             JSR RESTOREINT
0F78 AE A1 0C             LDX CLOCK
0F7B BD BC 0F             LDA RIGHT1,X
0F7E A2 71                LDX #<COMMAND
0F80 A0 0F                LDY #>COMMAND
0F82 20 A4 0C             JSR COMPARE
0F85 CE A1 0C             DEC CLOCK
0F88 10 DD                BPL LOOP
0F8A AD 04 0C             LDA CMD
0F8D 8D 9F 0F             STA COMMAND2
0F90 A9 04                LDA #4
0F92 8D A1 0C             STA CLOCK
               LOOP2
0F95 A2 12                LDX #$12
0F97 A0 12                LDY #$12
0F99 AD A1 0C             LDA CLOCK
0F9C 20 61 08             JSR SETINT
               COMMAND2
0F9F BD F0 FF             LDA $FFF0,X
0FA2 EA                   NOP
0FA3 20 C9 08             JSR RESTOREINT
0FA6 AE A1 0C             LDX CLOCK
0FA9 BD C0 0F             LDA RIGHT2,X
0FAC A2 9F                LDX #<COMMAND2
0FAE A0 0F                LDY #>COMMAND2
0FB0 20 A4 0C             JSR COMPARE
0FB3 CE A1 0C             DEC CLOCK
0FB6 10 DD                BPL LOOP2
0FB8 20 E4 09             JSR RESTORESTACK
0FBB 60                   RTS
0FBC 03 03 03 04
               RIGHT1     .BYTE 3,3,3,4
0FC0 03 03 03 03 04
               RIGHT2     .BYTE 3,3,3,3,4
                          .BEND


               WAX
               WAY
                          .BLOCK
0FC5 20 D4 09             JSR SAVESTACK
0FC8 AD 04 0C             LDA CMD
0FCB 8D DD 0F             STA COMMAND
0FCE A9 04                LDA #4
0FD0 8D A1 0C             STA CLOCK
               LOOP
0FD3 A2 00                LDX #0
0FD5 A0 00                LDY #0
0FD7 AD A1 0C             LDA CLOCK
0FDA 20 61 08             JSR SETINT
               COMMAND
0FDD 9D F0 FF             STA $FFF0,X
0FE0 EA                   NOP
0FE1 20 C9 08             JSR RESTOREINT
0FE4 AE A1 0C             LDX CLOCK
0FE7 BD FA 0F             LDA RIGHT,X
0FEA A2 DD                LDX #<COMMAND
0FEC A0 0F                LDY #>COMMAND
0FEE 20 A4 0C             JSR COMPARE
0FF1 CE A1 0C             DEC CLOCK
0FF4 10 DD                BPL LOOP
0FF6 20 E4 09             JSR RESTORESTACK
0FF9 60                   RTS
0FFA 03 03 03 03 04
               RIGHT      .BYTE 3,3,3,3,4
                          .BEND


               MAX
               MAY
                          .BLOCK
0FFF 20 D4 09             JSR SAVESTACK
1002 AD 04 0C             LDA CMD
1005 8D 17 10             STA COMMAND
1008 A9 06                LDA #6
100A 8D A1 0C             STA CLOCK
               LOOP
100D A2 00                LDX #0
100F A0 00                LDY #0
1011 AD A1 0C             LDA CLOCK
1014 20 61 08             JSR SETINT
               COMMAND
1017 9D F0 FF             STA $FFF0,X
101A EA                   NOP
101B 20 C9 08             JSR RESTOREINT
101E AE A1 0C             LDX CLOCK
1021 BD 34 10             LDA RIGHT,X
1024 A2 17                LDX #<COMMAND
1026 A0 10                LDY #>COMMAND
1028 20 A4 0C             JSR COMPARE
102B CE A1 0C             DEC CLOCK
102E 10 DD                BPL LOOP
1030 20 E4 09             JSR RESTORESTACK
1033 60                   RTS
1034 03 03 03 03 03 03 04
               RIGHT      .BYTE 3,3,3,3,3,3,4
                          .BEND


               RIX
               WIX
                          .BLOCK
103B 20 D4 09             JSR SAVESTACK
103E AD 04 0C             LDA CMD
1041 8D 59 10             STA COMMAND
1044 A9 02                LDA #$02
1046 85 AC                STA 172
1048 A9 00                LDA #$00
104A 85 AD                STA 173
104C A9 05                LDA #5
104E 8D A1 0C             STA CLOCK
               LOOP
1051 A2 00                LDX #0
1053 AD A1 0C             LDA CLOCK
1056 20 61 08             JSR SETINT
               COMMAND
1059 A1 AC                LDA (172,X)
105B EA                   NOP
105C 20 C9 08             JSR RESTOREINT
105F AE A1 0C             LDX CLOCK
1062 BD 75 10             LDA RIGHT,X
1065 A2 59                LDX #<COMMAND
1067 A0 10                LDY #>COMMAND
1069 20 A4 0C             JSR COMPARE
106C CE A1 0C             DEC CLOCK
106F 10 E0                BPL LOOP
1071 20 E4 09             JSR RESTORESTACK
1074 60                   RTS
1075 02 02 02 02 02 03
               RIGHT      .BYTE 2,2,2,2,2,3
                          .BEND


               MIX
                          .BLOCK
107B 20 D4 09             JSR SAVESTACK
107E AD 04 0C             LDA CMD
1081 8D 99 10             STA COMMAND
1084 A9 02                LDA #$02
1086 85 AC                STA 172
1088 A9 00                LDA #$00
108A 85 AD                STA 173
108C A9 07                LDA #7
108E 8D A1 0C             STA CLOCK
               LOOP
1091 A2 00                LDX #0
1093 AD A1 0C             LDA CLOCK
1096 20 61 08             JSR SETINT
               COMMAND
1099 A1 AC                LDA (172,X)
109B EA                   NOP
109C 20 C9 08             JSR RESTOREINT
109F AE A1 0C             LDX CLOCK
10A2 BD B5 10             LDA RIGHT,X
10A5 A2 99                LDX #<COMMAND
10A7 A0 10                LDY #>COMMAND
10A9 20 A4 0C             JSR COMPARE
10AC CE A1 0C             DEC CLOCK
10AF 10 E0                BPL LOOP
10B1 20 E4 09             JSR RESTORESTACK
10B4 60                   RTS
10B5 02 02 02 02 02 02 02 03
               RIGHT      .BYTE 2,2,2,2,2,2,2,3
                          .BEND


               RIY
                          .BLOCK
10BD 20 D4 09             JSR SAVESTACK
10C0 AD 04 0C             LDA CMD
10C3 8D DE 10             STA COMMAND
10C6 8D 03 11             STA COMMAND1
10C9 A9 F0                LDA #$F0
10CB 85 AC                STA 172
10CD A9 FF                LDA #$FF
10CF 85 AD                STA 173
10D1 A9 04                LDA #4
10D3 8D A1 0C             STA CLOCK
               LOOP
10D6 A0 00                LDY #$00
10D8 AD A1 0C             LDA CLOCK
10DB 20 61 08             JSR SETINT
               COMMAND
10DE B1 AC                LDA (172),Y
10E0 EA                   NOP
10E1 20 C9 08             JSR RESTOREINT
10E4 AE A1 0C             LDX CLOCK
10E7 BD 1F 11             LDA RIGHT,X
10EA A2 DE                LDX #<COMMAND
10EC A0 10                LDY #>COMMAND
10EE 20 A4 0C             JSR COMPARE
10F1 CE A1 0C             DEC CLOCK
10F4 10 E0                BPL LOOP
10F6 A9 05                LDA #5
10F8 8D A1 0C             STA CLOCK
               LOOP1
10FB A0 12                LDY #$12
10FD AD A1 0C             LDA CLOCK
1100 20 61 08             JSR SETINT
               COMMAND1
1103 B1 AC                LDA (172),Y
1105 EA                   NOP
1106 20 C9 08             JSR RESTOREINT
1109 AE A1 0C             LDX CLOCK
110C BD 24 11             LDA RIGHT1,X
110F A2 03                LDX #<COMMAND1
1111 A0 11                LDY #>COMMAND1
1113 20 A4 0C             JSR COMPARE
1116 CE A1 0C             DEC CLOCK
1119 10 E0                BPL LOOP1
111B 20 E4 09             JSR RESTORESTACK
111E 60                   RTS
111F 02 02 02 02 03
               RIGHT      .BYTE 2,2,2,2,3
1124 02 02 02 02 02 03
               RIGHT1     .BYTE 2,2,2,2,2,3
                          .BEND


               WIY
                          .BLOCK
112A 20 D4 09             JSR SAVESTACK
112D AD 04 0C             LDA CMD
1130 8D 48 11             STA COMMAND
1133 A9 F0                LDA #$F0
1135 85 AC                STA 172
1137 A9 FF                LDA #$FF
1139 85 AD                STA 173
113B A9 05                LDA #5
113D 8D A1 0C             STA CLOCK
               LOOP
1140 A0 00                LDY #$00
1142 AD A1 0C             LDA CLOCK
1145 20 61 08             JSR SETINT
               COMMAND
1148 B1 AC                LDA (172),Y
114A EA                   NOP
114B 20 C9 08             JSR RESTOREINT
114E AE A1 0C             LDX CLOCK
1151 BD 64 11             LDA RIGHT,X
1154 A2 48                LDX #<COMMAND
1156 A0 11                LDY #>COMMAND
1158 20 A4 0C             JSR COMPARE
115B CE A1 0C             DEC CLOCK
115E 10 E0                BPL LOOP
1160 20 E4 09             JSR RESTORESTACK
1163 60                   RTS
1164 02 02 02 02 02 03
               RIGHT      .BYTE 2,2,2,2,2,3
                          .BEND


               MIY
                          .BLOCK
116A 20 D4 09             JSR SAVESTACK
116D AD 04 0C             LDA CMD
1170 8D 88 11             STA COMMAND
1173 A9 F0                LDA #$F0
1175 85 AC                STA 172
1177 A9 FF                LDA #$FF
1179 85 AD                STA 173
117B A9 07                LDA #7
117D 8D A1 0C             STA CLOCK
               LOOP
1180 A0 00                LDY #$00
1182 AD A1 0C             LDA CLOCK
1185 20 61 08             JSR SETINT
               COMMAND
1188 B1 AC                LDA (172),Y
118A EA                   NOP
118B 20 C9 08             JSR RESTOREINT
118E AE A1 0C             LDX CLOCK
1191 BD A4 11             LDA RIGHT,X
1194 A2 88                LDX #<COMMAND
1196 A0 11                LDY #>COMMAND
1198 20 A4 0C             JSR COMPARE
119B CE A1 0C             DEC CLOCK
119E 10 E0                BPL LOOP
11A0 20 E4 09             JSR RESTORESTACK
11A3 60                   RTS
11A4 02 02 02 02 02 02 02 03
               RIGHT      .BYTE 2,2,2,2,2,2,2,3
                          .BEND


               R
                          .BLOCK
               FROM       = $2000
               TO         = $2000
11AC AD 04 0C             LDA CMD
11AF 8D FE 1F             STA FROM-2
11B2 A2 F3                LDX #$F3
11B4 29 20                AND #$20
11B6 F0 02                BEQ CLEAR
11B8 A2 30                LDX #$30
               CLEAR
11BA 8A                   TXA
11BB 48                   PHA
11BC A9 00                LDA #TO-FROM&$FF
11BE 8D FF 1F             STA FROM-1
11C1 A9 EA                LDA #$EA
11C3 8D 00 20             STA TO
11C6 A9 60                LDA #$60
11C8 8D 01 20             STA TO+1
11CB A9 00                LDA #0
11CD 8D A1 0C             STA CLOCK
11D0 A9 0A                LDA #10
11D2 20 61 08             JSR SETINT
11D5 28                   PLP
11D6 20 FE 1F             JSR FROM-2
11D9 20 C9 08             JSR RESTOREINT
11DC A2 00                LDX #<TO
11DE A0 20                LDY #>TO
11E0 A9 00                LDA #0
11E2 20 A4 0C             JSR COMPARE
                          .BEND

                          .BLOCK
               FROM       = $2000
               TO         = $2000
11E5 AD 04 0C             LDA CMD
11E8 8D FE 1F             STA FROM-2
11EB A2 F3                LDX #$F3
11ED 29 20                AND #$20
11EF F0 02                BEQ CLEAR
11F1 A2 30                LDX #$30
               CLEAR
11F3 8A                   TXA
11F4 48                   PHA
11F5 A9 00                LDA #TO-FROM&$FF
11F7 8D FF 1F             STA FROM-1
11FA A9 EA                LDA #$EA
11FC 8D 00 20             STA TO
11FF A9 60                LDA #$60
1201 8D 01 20             STA TO+1
1204 A9 01                LDA #1
1206 8D A1 0C             STA CLOCK
1209 A9 0B                LDA #11
120B 20 61 08             JSR SETINT
120E 28                   PLP
120F 20 FE 1F             JSR FROM-2
1212 20 C9 08             JSR RESTOREINT
1215 A2 00                LDX #<TO
1217 A0 20                LDY #>TO
1219 A9 01                LDA #1
121B 20 A4 0C             JSR COMPARE
                          .BEND

                          .BLOCK
               FROM       = $2000
               TO         = $2010
121E AD 04 0C             LDA CMD
1221 8D FE 1F             STA FROM-2
1224 A2 F3                LDX #$F3
1226 29 20                AND #$20
1228 D0 02                BNE CLEAR
122A A2 30                LDX #$30
               CLEAR
122C 8A                   TXA
122D 48                   PHA
122E A9 10                LDA #TO-FROM&$FF
1230 8D FF 1F             STA FROM-1
1233 A9 EA                LDA #$EA
1235 8D 10 20             STA TO
1238 A9 60                LDA #$60
123A 8D 11 20             STA TO+1
123D A9 00                LDA #0
123F 8D A1 0C             STA CLOCK
1242 A9 0A                LDA #10
1244 20 61 08             JSR SETINT
1247 28                   PLP
1248 20 FE 1F             JSR FROM-2
124B 20 C9 08             JSR RESTOREINT
124E A2 10                LDX #<TO
1250 A0 20                LDY #>TO
1252 A9 00                LDA #0
1254 20 A4 0C             JSR COMPARE
                          .BEND

                          .BLOCK
               FROM       = $2000
               TO         = $2010
1257 AD 04 0C             LDA CMD
125A 8D FE 1F             STA FROM-2
125D A2 F3                LDX #$F3
125F 29 20                AND #$20
1261 D0 02                BNE CLEAR
1263 A2 30                LDX #$30
               CLEAR
1265 8A                   TXA
1266 48                   PHA
1267 A9 10                LDA #TO-FROM&$FF
1269 8D FF 1F             STA FROM-1
126C A9 EA                LDA #$EA
126E 8D 10 20             STA TO
1271 A9 60                LDA #$60
1273 8D 11 20             STA TO+1
1276 A9 01                LDA #1
1278 8D A1 0C             STA CLOCK
127B A9 0B                LDA #11
127D 20 61 08             JSR SETINT
1280 28                   PLP
1281 20 FE 1F             JSR FROM-2
1284 20 C9 08             JSR RESTOREINT
1287 A2 10                LDX #<TO
1289 A0 20                LDY #>TO
128B A9 01                LDA #1
128D 20 A4 0C             JSR COMPARE
                          .BEND

                          .BLOCK
               FROM       = $2000
               TO         = $2010
1290 AD 04 0C             LDA CMD
1293 8D FE 1F             STA FROM-2
1296 A2 F3                LDX #$F3
1298 29 20                AND #$20
129A D0 02                BNE CLEAR
129C A2 30                LDX #$30
               CLEAR
129E 8A                   TXA
129F 48                   PHA
12A0 A9 10                LDA #TO-FROM&$FF
12A2 8D FF 1F             STA FROM-1
12A5 A9 EA                LDA #$EA
12A7 8D 10 20             STA TO
12AA A9 60                LDA #$60
12AC 8D 11 20             STA TO+1
12AF A9 02                LDA #2
12B1 8D A1 0C             STA CLOCK
12B4 A9 0C                LDA #12
12B6 20 61 08             JSR SETINT
12B9 28                   PLP
12BA 20 FE 1F             JSR FROM-2
12BD 20 C9 08             JSR RESTOREINT
12C0 A2 10                LDX #<TO
12C2 A0 20                LDY #>TO
12C4 A9 01                LDA #1
12C6 20 A4 0C             JSR COMPARE
                          .BEND

                          .BLOCK
               FROM       = $1FF0
               TO         = $2010
12C9 AD 04 0C             LDA CMD
12CC 8D EE 1F             STA FROM-2
12CF A2 F3                LDX #$F3
12D1 29 20                AND #$20
12D3 D0 02                BNE CLEAR
12D5 A2 30                LDX #$30
               CLEAR
12D7 8A                   TXA
12D8 48                   PHA
12D9 A9 20                LDA #TO-FROM&$FF
12DB 8D EF 1F             STA FROM-1
12DE A9 EA                LDA #$EA
12E0 8D 10 20             STA TO
12E3 A9 60                LDA #$60
12E5 8D 11 20             STA TO+1
12E8 A9 01                LDA #1
12EA 8D A1 0C             STA CLOCK
12ED A9 0B                LDA #11
12EF 20 61 08             JSR SETINT
12F2 28                   PLP
12F3 20 EE 1F             JSR FROM-2
12F6 20 C9 08             JSR RESTOREINT
12F9 A2 10                LDX #<TO
12FB A0 20                LDY #>TO
12FD A9 00                LDA #0
12FF 20 A4 0C             JSR COMPARE
                          .BEND

                          .BLOCK
               FROM       = $1FF0
               TO         = $2010
1302 AD 04 0C             LDA CMD
1305 8D EE 1F             STA FROM-2
1308 A2 F3                LDX #$F3
130A 29 20                AND #$20
130C D0 02                BNE CLEAR
130E A2 30                LDX #$30
               CLEAR
1310 8A                   TXA
1311 48                   PHA
1312 A9 20                LDA #TO-FROM&$FF
1314 8D EF 1F             STA FROM-1
1317 A9 EA                LDA #$EA
1319 8D 10 20             STA TO
131C A9 60                LDA #$60
131E 8D 11 20             STA TO+1
1321 A9 02                LDA #2
1323 8D A1 0C             STA CLOCK
1326 A9 0C                LDA #12
1328 20 61 08             JSR SETINT
132B 28                   PLP
132C 20 EE 1F             JSR FROM-2
132F 20 C9 08             JSR RESTOREINT
1332 A2 10                LDX #<TO
1334 A0 20                LDY #>TO
1336 A9 00                LDA #0
1338 20 A4 0C             JSR COMPARE
                          .BEND

                          .BLOCK
               FROM       = $1FF0
               TO         = $2010
133B AD 04 0C             LDA CMD
133E 8D EE 1F             STA FROM-2
1341 A2 F3                LDX #$F3
1343 29 20                AND #$20
1345 D0 02                BNE CLEAR
1347 A2 30                LDX #$30
               CLEAR
1349 8A                   TXA
134A 48                   PHA
134B A9 20                LDA #TO-FROM&$FF
134D 8D EF 1F             STA FROM-1
1350 A9 EA                LDA #$EA
1352 8D 10 20             STA TO
1355 A9 60                LDA #$60
1357 8D 11 20             STA TO+1
135A A9 03                LDA #3
135C 8D A1 0C             STA CLOCK
135F A9 0D                LDA #13
1361 20 61 08             JSR SETINT
1364 28                   PLP
1365 20 EE 1F             JSR FROM-2
1368 20 C9 08             JSR RESTOREINT
136B A2 10                LDX #<TO
136D A0 20                LDY #>TO
136F A9 01                LDA #1
1371 20 A4 0C             JSR COMPARE
                          .BEND

1374 60                   RTS


               BRKN
                          .BLOCK
1375 A9 AB                LDA #<IRQ
1377 8D FE FF             STA $FFFE
137A A9 13                LDA #>IRQ
137C 8D FF FF             STA $FFFF
137F A9 09                LDA #9
1381 8D A1 0C             STA CLOCK
               LOOP
1384 AD A1 0C             LDA CLOCK
1387 20 61 08             JSR SETINT
               COMMAND
138A 00                   BRK
138B EA                   NOP
138C 20 C9 08             JSR RESTOREINT
138F AE A1 0C             LDX CLOCK
1392 AD 5F 08             LDA FLAGSBEFORE
1395 5D B7 13             EOR FLAGS,X
1398 8D 5F 08             STA FLAGSBEFORE
139B BD AD 13             LDA TABLE,X
139E A2 8A                LDX #<COMMAND
13A0 A0 13                LDY #>COMMAND
13A2 20 A4 0C             JSR COMPARE
13A5 CE A1 0C             DEC CLOCK
13A8 10 DA                BPL LOOP
13AA 60                   RTS
               IRQ
13AB EA                   NOP
13AC 40                   RTI
13AD 02 02 02 02 22
               TABLE      .BYTE 2,2,2,2,34
13B2 22 22 22 02 02
                          .BYTE 34,34,34,2,2
13B7 10 10 10 10 04
               FLAGS      .BYTE $10,$10,$10,$10,$04
13BC 04 04 04 00 00
                          .BYTE $04,$04,$04,$00,$00
                          .BEND


               PHAN
               PHPN
                          .BLOCK
13C1 AD 04 0C             LDA CMD
13C4 8D D2 13             STA COMMAND
13C7 A9 02                LDA #2
13C9 8D A1 0C             STA CLOCK
               LOOP
13CC AD A1 0C             LDA CLOCK
13CF 20 61 08             JSR SETINT
               COMMAND
13D2 EA                   NOP
13D3 68                   PLA
13D4 20 C9 08             JSR RESTOREINT
13D7 AE A1 0C             LDX CLOCK
13DA BD EA 13             LDA RIGHT,X
13DD A2 D2                LDX #<COMMAND
13DF A0 13                LDY #>COMMAND
13E1 20 A4 0C             JSR COMPARE
13E4 CE A1 0C             DEC CLOCK
13E7 10 E3                BPL LOOP
13E9 60                   RTS
13EA 01 01 02  RIGHT      .BYTE 1,1,2
                          .BEND


               PLAN
               PLPN
                          .BLOCK
13ED AD 04 0C             LDA CMD
13F0 8D 01 14             STA COMMAND
13F3 A9 03                LDA #3
13F5 8D A1 0C             STA CLOCK
               LOOP
13F8 A9 00                LDA #0
13FA 48                   PHA
13FB AD A1 0C             LDA CLOCK
13FE 20 61 08             JSR SETINT
               COMMAND
1401 EA                   NOP
1402 EA                   NOP
1403 20 C9 08             JSR RESTOREINT
1406 AE A1 0C             LDX CLOCK
1409 BD 19 14             LDA RIGHT,X
140C A2 01                LDX #<COMMAND
140E A0 14                LDY #>COMMAND
1410 20 A4 0C             JSR COMPARE
1413 CE A1 0C             DEC CLOCK
1416 10 E0                BPL LOOP
1418 60                   RTS
1419 01 01 01 02
               RIGHT      .BYTE 1,1,1,2
                          .BEND


               JMPW
                          .BLOCK
141D A9 02                LDA #2
141F 8D A1 0C             STA CLOCK
               LOOP
1422 AD A1 0C             LDA CLOCK
1425 20 61 08             JSR SETINT
1428 4C 2C 14             JMP TARGET
142B 00                   BRK
               TARGET
142C EA                   NOP
142D 20 C9 08             JSR RESTOREINT
1430 AE A1 0C             LDX CLOCK
1433 BD 43 14             LDA RIGHT,X
1436 A2 2C                LDX #<TARGET
1438 A0 14                LDY #>TARGET
143A 20 A4 0C             JSR COMPARE
143D CE A1 0C             DEC CLOCK
1440 10 E0                BPL LOOP
1442 60                   RTS
1443 00 00 01  RIGHT      .BYTE 0,0,1
                          .BEND


               JMPI
                          .BLOCK
1446 A9 5F                LDA #<TARGET
1448 8D 00 20             STA $2000
144B A9 14                LDA #>TARGET
144D 8D 01 20             STA $2001
1450 A9 04                LDA #4
1452 8D A1 0C             STA CLOCK
               LOOP
1455 AD A1 0C             LDA CLOCK
1458 20 61 08             JSR SETINT
145B 6C 00 20             JMP ($2000)
145E 00                   BRK
               TARGET
145F EA                   NOP
1460 20 C9 08             JSR RESTOREINT
1463 AE A1 0C             LDX CLOCK
1466 BD 76 14             LDA RIGHT,X
1469 A2 5F                LDX #<TARGET
146B A0 14                LDY #>TARGET
146D 20 A4 0C             JSR COMPARE
1470 CE A1 0C             DEC CLOCK
1473 10 E0                BPL LOOP
1475 60                   RTS
1476 00 00 00 00 01
               RIGHT      .BYTE 0,0,0,0,1
                          .BEND


               JSRW
                          .BLOCK
147B A9 05                LDA #5
147D 8D A1 0C             STA CLOCK
               LOOP
1480 AD A1 0C             LDA CLOCK
1483 20 61 08             JSR SETINT
1486 20 8A 14             JSR TARGET
1489 00                   BRK
               TARGET
148A 68                   PLA
148B 68                   PLA
148C 20 C9 08             JSR RESTOREINT
148F AE A1 0C             LDX CLOCK
1492 BD A2 14             LDA RIGHT,X
1495 A2 8A                LDX #<TARGET
1497 A0 14                LDY #>TARGET
1499 20 A4 0C             JSR COMPARE
149C CE A1 0C             DEC CLOCK
149F 10 DF                BPL LOOP
14A1 60                   RTS
14A2 00 00 00 00 00 01
               RIGHT      .BYTE 0,0,0,0,0,1
                          .BEND


               RTSN
                          .BLOCK
14A8 A9 05                LDA #5
14AA 8D A1 0C             STA CLOCK
               LOOP
14AD A9 14                LDA #>CONTINUE-1
14AF 48                   PHA
14B0 A9 B9                LDA #<CONTINUE-1
14B2 48                   PHA
14B3 AD A1 0C             LDA CLOCK
14B6 20 61 08             JSR SETINT
14B9 60                   RTS
               CONTINUE
14BA EA                   NOP
14BB 20 C9 08             JSR RESTOREINT
14BE AE A1 0C             LDX CLOCK
14C1 BD D1 14             LDA RIGHT,X
14C4 A2 BA                LDX #<CONTINUE
14C6 A0 14                LDY #>CONTINUE
14C8 20 A4 0C             JSR COMPARE
14CB CE A1 0C             DEC CLOCK
14CE 10 DD                BPL LOOP
14D0 60                   RTS
14D1 00 00 00 00 00 01
               RIGHT      .BYTE 0,0,0,0,0,1
                          .BEND


               RTIN
                          .BLOCK
14D7 A9 05                LDA #5
14D9 8D A1 0C             STA CLOCK
               LOOP
14DC A9 14                LDA #>CONTINUE
14DE 48                   PHA
14DF A9 EA                LDA #<CONTINUE
14E1 48                   PHA
14E2 08                   PHP
14E3 AD A1 0C             LDA CLOCK
14E6 20 61 08             JSR SETINT
14E9 40                   RTI
               CONTINUE
14EA EA                   NOP
14EB 20 C9 08             JSR RESTOREINT
14EE AE A1 0C             LDX CLOCK
14F1 BD 01 15             LDA RIGHT,X
14F4 A2 EA                LDX #<CONTINUE
14F6 A0 14                LDY #>CONTINUE
14F8 20 A4 0C             JSR COMPARE
14FB CE A1 0C             DEC CLOCK
14FE 10 DC                BPL LOOP
1500 60                   RTS
1501 00 00 00 00 00 01
               RIGHT      .BYTE 0,0,0,0,0,1
                          .BEND


               HLTN
1507 60                   RTS

